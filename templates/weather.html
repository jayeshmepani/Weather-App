<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Weather Information - Modern Weather App</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/fontawesome.min.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>

<body>
  <div class="container">
    <div class="header">
      <h1>🌤️ Weather Information</h1>
    </div>

    {% if weather_info or weather_info1 or weather_info2 %}
    <div class="main-weather">
      <div class="location-info">
        <div class="location-details">
          {% if weather_info %}
          {% for source, data in weather_info.items() %}
          {% if source == "OpenWeatherMap" %}
          <h2>📍 {{ data.City }}, {{ data.Country }}</h2>
          {% endif %}
          {% if source == "Tomorrow.io" %}
          <p>{{ data.Coordinates }}</p>
          {% endif %}
          {% endfor %}
          {% endif %}
        </div>
        <div class="current-time">
          {% if weather_info2 %}
          {% for source, data in weather_info2.items() %}
          {% if source == "OpenWeatherMap" %}
          <p><strong>🕒 Current Time</strong></p>
          <p>{{ data['Current Local Time'] }}</p>
          {% endif %}
          {% endfor %}
          {% endif %}
        </div>
      </div>

      <div class="weather-main">
        {% if weather_info1 %}
        {% for source, data in weather_info1.items() %}
        {% if source == "OpenWeatherMap" %}
        <div class="weather-icon">
          <img src="http://openweathermap.org/img/wn/{{ data.Weather_Icon }}@4x.png" alt="Weather Icon" />
        </div>
        <div class="weather-info">
          <div class="weather-description">{{ data.Weather }}</div>
          <div class="temperature">{{ data.Temperature }}</div>
          <div class="feels-like">Feels like {{ data['Feels Like'] }}</div>
        </div>
        <div class="temp-range">
          <div class="temp-item">
            <h4>Min</h4>
            <span>{{ data['Min Temperature'] }}</span>
          </div>
          <div class="temp-item">
            <h4>Max</h4>
            <span>{{ data['Max Temperature'] }}</span>
          </div>
        </div>
        {% endif %}
        {% endfor %}
        {% endif %}
      </div>
    </div>

    <div class="weather-details">
      {% if weather_info1 %}
      <div class="detail-card">
        <h3>📍 Environmental Conditions</h3>
        <div class="detail-grid">
          {% for source, data in weather_info1.items() %}
          {% if source == "OpenWeatherMap" %}
          <div class="detail-item">
            <div class="label"><i class="fas fa-eye"></i> Visibility</div>
            <div class="value">{{ data.Visibility }}</div>
          </div>
          {% if data['Sea Level Pressure'] %}
          <div class="detail-item">
            <div class="label"><i class="fas fa-tachometer-alt"></i> Pressure at Sea Level</div>
            <div class="value">{{ data['Sea Level Pressure'] }}</div>
          </div>
          {% endif %}
          {% if data['Ground Level Pressure'] %}
          <div class="detail-item">
            <div class="label"><i class="fas fa-compress-arrows-alt"></i> Pressure at Ground Level</div>
            <div class="value">{{ data['Ground Level Pressure'] }}</div>
          </div>
          {% endif %}
          {% endif %}
          {% if source == "Tomorrow.io" %}
          <div class="detail-item">
            <div class="label"><i class="fas fa-tachometer-alt"></i> Overall Pressure</div>
            <div class="value">{{ data.Pressure }}</div>
          </div>
          <div class="detail-item">
            <div class="label"><i class="fas fa-tint"></i> Humidity</div>
            <div class="value">{{ data.Humidity }}</div>
          </div>
          <div class="detail-item">
            <div class="label"><i class="fas fa-thermometer-half"></i> Dew Point</div>
            <div class="value">{{ data['Dew Point'] }}</div>
          </div>
          {% endif %}
          {% endfor %}
        </div>
      </div>

      <div class="detail-card">
        <h3>💨 Wind Details</h3>
        <div class="detail-grid">
          {% for source, data in weather_info1.items() %}
          {% if source == "Tomorrow.io" %}
          <div class="detail-item">
            <div class="label"><i class="fas fa-wind"></i> Wind Speed</div>
            <div class="value">{{ data['Wind Speed'] }}</div>
          </div>
          <div class="detail-item">
            <div class="label"><i class="fa-solid fa-hurricane"></i> Wind Gust</div>
            <div class="value">{{ data['Wind Gust'] }}</div>
          </div>
          <div class="detail-item">
            <div class="label"><i class="fas fa-compass"></i> Wind Direction</div>
            <div class="value">{{ data['Wind Direction'] }}</div>
          </div>
          {% endif %}
          {% endfor %}
        </div>
      </div>

      <div class="detail-card">
        <h3>☁️ Cloud Coverage</h3>
        <div class="detail-grid">
          {% for source, data in weather_info1.items() %}
          {% if source == "Tomorrow.io" %}
          <div class="detail-item">
            <div class="label"><i class="fas fa-cloud"></i> Cloudiness</div>
            <div class="value">{{ data.Cloudiness }}</div>
          </div>
          <div class="detail-item">
            <div class="label"><i class="fas fa-cloud-meatball"></i> Cloud Base</div>
            <div class="value">{{ data['Cloud Base'] }}</div>
          </div>
          <div class="detail-item">
            <div class="label"><i class="fas fa-cloud-rain"></i> Cloud Ceiling</div>
            <div class="value">{{ data['Cloud Ceiling'] }}</div>
          </div>
          {% endif %}
          {% endfor %}
        </div>
      </div>

      <div class="detail-card">
        <h3>☀️ UV Index</h3>
        <div class="detail-grid">
          {% for source, data in weather_info1.items() %}
          {% if source == "Tomorrow.io" %}
          <div class="detail-item">
            <div class="label"><i class="fas fa-sun"></i> UV Index</div>
            <div class="value">{{ data['UV Index'] }}</div>
          </div>
          <div class="detail-item">
            <div class="label"><i class="fas fa-shield-alt"></i> UV Health Concern</div>
            <div class="value">{{ data['UV Health Concern'] }}</div>
          </div>
          {% endif %}
          {% endfor %}
        </div>
      </div>
      {% endif %}
    </div>

    {% if weather_info2 %}
    {% for source, data in weather_info2.items() %}
    {% if source == "OpenWeatherMap" %}
    <div class="sun-times">
      <h3>☀️ Sun Times</h3>
      <div class="sun-info">
        <div class="sun-item">
          <div class="icon">🌅</div>
          <div class="time">{{ data.Sunrise }}</div>
          <div class="label">Sunrise</div>
        </div>
        <div class="sun-item">
          <div class="icon">🌇</div>
          <div class="time">{{ data.Sunset }}</div>
          <div class="label">Sunset</div>
        </div>
      </div>
    </div>
    {% endif %}
    {% endfor %}
    {% endif %}

    <div class="forecast-section">
      <h3>📊 Weather Forecast</h3>
      <form id="forecastForm" method="post" action="/forecast" target="_blank">
        <input type="hidden" name="lat" value="{{ lat }}" />
        <input type="hidden" name="lon" value="{{ lon }}" />

        <div class="interval-selector">
          <div class="radio-group">
            <input type="radio" name="interval" value="hourly" id="hourly" checked />
            <label for="hourly">
              <i class="fas fa-chart-line"></i> Hourly (up to 6 days)
            </label>
          </div>
          <div class="radio-group">
            <input type="radio" name="interval" value="minutely" id="minutely" />
            <label for="minutely">
              <i class="fas fa-clock"></i> Minutely (up to 1 hour)
            </label>
          </div>
        </div>

        <div class="action-buttons">
          <button type="submit" class="btn btn-primary">
            📊 Get Detailed Forecast
          </button>
          <a href="/" class="btn btn-secondary">
            🏠 Back to Home
          </a>
        </div>
      </form>
    </div>

    {% else %}
    <div class="main-weather">
      <div class="weather-main" style="text-align: center;">
        <div>
          <h2>❌ No Weather Data Available</h2>
          <p style="color: var(--text-secondary); margin-top: 1rem;">
            Unable to retrieve weather information for the requested location.
          </p>
        </div>
      </div>
      <div class="action-buttons" style="margin-top: 2rem;">
        <a href="/" class="btn btn-secondary">
          🏠 Back to Home
        </a>
      </div>
    </div>
    {% endif %}
  </div>

  <script src="{{ url_for('static', filename='js/main.js') }}"></script>

</body>

</html>
